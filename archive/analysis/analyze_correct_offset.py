"""Analyze packet structure with reading at offset 10"""
import struct

# Packet with reading 1.0 (channel 5, address 6, LEL)
p1 = bytes.fromhex('8111000fe088490005813f80000000240300ece08829462f')
# Packet with reading 6.0 (channel 20, address 21, VOC)  
p2 = bytes.fromhex('81110014e0884900148140c0000020270780e3c8b1bc34af')

print('='*80)
print('CORRECTED PACKET STRUCTURE ANALYSIS')
print('='*80)
print()

print('Packet 1 (Reading 1.0, Channel 5, Addr 6, LEL):')
print(f'  Hex: {p1.hex()}')
print(f'  [0-1] Transmitter Address: {struct.unpack(">H", p1[0:2])[0]} (0x{struct.unpack(">H", p1[0:2])[0]:04x})')
print(f'  [2] Protocol: {p1[2]} (0x{p1[2]:02x})')
print(f'  [3] Byte 3: {p1[3]} (0x{p1[3]:02x})')
print(f'  [4] Byte 4: {p1[4]} (0x{p1[4]:02x})')
print(f'  [5] Byte 5: {p1[5]} (0x{p1[5]:02x})')
print(f'  [6] Byte 6: {p1[6]} (0x{p1[6]:02x})')
print(f'  [7] Byte 7: {p1[7]} (0x{p1[7]:02x})')
print(f'  [8] Byte 8: {p1[8]} (0x{p1[8]:02x}) - varies')
print(f'  [9] Byte 9: {p1[9]} (0x{p1[9]:02x}) - always 0x81')
print(f'  [10-13] READING: {struct.unpack(">f", p1[10:14])[0]:.2f} ✓')
print(f'  [14] Byte 14: {p1[14]} (0x{p1[14]:02x})')
print(f'  [15] Byte 15: {p1[15]} (0x{p1[15]:02x})')
print()

print('Packet 2 (Reading 6.0, Channel 20, Addr 21, VOC):')
print(f'  Hex: {p2.hex()}')
print(f'  [0-1] Transmitter Address: {struct.unpack(">H", p2[0:2])[0]} (0x{struct.unpack(">H", p2[0:2])[0]:04x})')
print(f'  [2] Protocol: {p2[2]} (0x{p2[2]:02x})')
print(f'  [3] Byte 3: {p2[3]} (0x{p2[3]:02x})')
print(f'  [4] Byte 4: {p2[4]} (0x{p2[4]:02x})')
print(f'  [5] Byte 5: {p2[5]} (0x{p2[5]:02x})')
print(f'  [6] Byte 6: {p2[6]} (0x{p2[6]:02x})')
print(f'  [7] Byte 7: {p2[7]} (0x{p2[7]:02x})')
print(f'  [8] Byte 8: {p2[8]} (0x{p2[8]:02x}) - varies')
print(f'  [9] Byte 9: {p2[9]} (0x{p2[9]:02x}) - always 0x81')
print(f'  [10-13] READING: {struct.unpack(">f", p2[10:14])[0]:.2f} ✓')
print(f'  [14] Byte 14: {p2[14]} (0x{p2[14]:02x})')
print(f'  [15] Byte 15: {p2[15]} (0x{p2[15]:02x})')
print()

print('='*80)
print('CONCLUSION')
print('='*80)
print('The READING field is at bytes [10-13], NOT [3-6]!')
print('This explains why all readings showed 0.00 in the previous analysis.')
print()
print('7032 shows:')
print('  Channel 5 (address 6): 1.00 LEL')
print('  Channel 20 (address 21): 6.00 VOC')
print()
print('Radio packets show:')
print('  Packet with reading 1.00 at offset 10')
print('  Packet with reading 6.00 at offset 10')
print()
print('The radio parsing MUST be corrected to read from offset [10-13].')
